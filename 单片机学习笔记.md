# 单片机学习
**ADC使用流程:**
```C
HAL_ADC_Start(&hadc1);
HAL_ADC_PollForConversion(&hadc1,0xffff);
Value = HAL_ADC_GetValue(&hadc1);
HAL_ADC_Stop(&hadc1);
```

- [STM32 之 Core Coupled Memory（CCM）内存](https://blog.csdn.net/longor1991/article/details/86150952)
- [SD卡初始化](https://www.cnblogs.com/sun-1989/p/3383756.html)
- [CCM内存](https://blog.csdn.net/longor1991/article/details/86150952)
- [STM32键盘](https://blog.csdn.net/qq_21566881/article/details/127926484)

```mermaid
graph TD
    A[系统启动] --> B{检测升级标志}
    B -->|需要升级| C[挂载SD卡文件系统]
    B -->|无需升级| D[跳转到原APP]
    C --> E[查找iap.bin文件]
    E -->|找到文件| F[读取文件并校验]
    E -->|未找到| G[报错并重启]
    F -->|校验通过| H[擦除Flash目标区域]
    F -->|校验失败| G
    H --> I[写入新固件]
    I --> J[验证固件完整性]
    J -->|成功| K[设置升级标志]
    J -->|失败| L[恢复备份并重启]
    K --> M[重启并跳转新固件]
```

![](vx_images/549166015812922.png =700x)
